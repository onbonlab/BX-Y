# 2.   协议通用说明

* 所有指令由上位机发起通讯，控制器接收指令并返回执行结果。控制器所有指令采用Json格式字符串，并统一采用UTF-8编码。Json键值对中的“键”大小写不敏感，但是建议采用全小写方式；“[指令名]”也是大小写不敏感的；其他没有特殊说明的，都为大小写敏感。

* “[指令名]”大小写不敏感的，但是为便于阅读，本文中均以驼峰式给出

* 无特殊说明，所有指令执行成功的返回，若无 “返回参数” 这一项，则使用统一返回格式，后文不再赘述，通用格式如下：

```json
{

  "remotefunction": {
 		"name":"[指令名]",
		"networkdevice":"eth0" # eth0、wifi_sta、wifi_ap
  }
}
```

　　‘networkdevice’只在UDP的回复中使用，用于指明作出回复的网卡设备

* 无特殊说明，所有指令执行失败的返回，通用格式如下：

```json
{
"remotefunction": {
    "name":"[指令名]",
    "networkdevice":"eth0", # eth0、wifi_sta、wifi_ap
    "error": {
      "code":"[错误码]",
      "mesg":"[错误信息]"
    }
  }
}
```

　　‘networkdevice’只在UDP的回复中使用，用于指明作出回复的网卡设备

* 本文中所有指令样例都是带格式对齐的，在实际使用中为了减少数据长度，降低丢包几率，可以去除这些格式对齐。

 

 



 